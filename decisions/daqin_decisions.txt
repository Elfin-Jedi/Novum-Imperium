decisions = {

	form_fulin = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 240
		
		potential = {
			tier = EMPEROR
			culture_group = great_qin
			OR = {
				religion_group = christian
				religion_openly_hellenic_or_reformed_trigger = yes
				religion = buddhist
				religion = taoist
				religion = manichean
			}
			NOT = { has_global_flag = fulin_formed }
		}
		
		allow = {
			realm_size = 200
			OR = {
				has_landed_title = e_byzantium
				e_byzantium = { has_holder = no }
			}
			independent = yes
			is_adult = yes
			prisoner = no
			is_incapable = no
			war = no
			prestige = 4000
			wealth = 2000
			completely_controls = d_thrace
		}
		
		effect = {
			custom_tooltip = {
				text = form_fulin_TT
			
				set_global_flag = fulin_formed
				primary_title = {
					show_scope_change = no
					e_fulin = {
						grant_title = ROOT
						copy_title_laws = PREV
						add_law = succ_primogeniture
						add_law = ze_administration_laws_2
						add_law = vice_royalty_2
					}
				}

				c_byzantion = {
					location = {
						ROOT = {
							capital = PREV
						}
					}
				}

				any_demesne_title = {
					limit = {
						NOT = {
							title = e_fulin
						}
						higher_tier_than = DUKE
					}
					destroy_landed_title = THIS
				}

				ROOT = { narrative_event = { id = DAQIN.00201 } }
				#any_playable_ruler = { #This makes the event fire for EVERYONE. Either remove, or give a seperate event to them. Is Fulin forming worth announcing? You think you'd notice.
				#	limit = {
				#		ai = no
				#		is_within_diplo_range = ROOT
				#	}
				#	narrative_event = { id = DAQIN.00201 }
				#}

				if = {
					limit = { religion = orthodox }
					k_orthodox = {
						owner = {
							grant_title_no_opinion = b_hagiasophia
						}
						set_defacto_liege = e_fulin
					}
				}
			}
		}
	}
	
	form_daqin = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 240
		
		potential = {
			has_landed_title = e_fulin
			OR = { 
				religion_group = christian 
				religion_openly_hellenic_or_reformed_trigger = yes
				religion = taoist
				religion = buddhist
				religion = manichean
			}
			is_adult = yes
			prisoner = no
			NOR = {
				has_alternate_start_parameter = { key = religion_names value = random }
				has_global_flag = rome_restored
				trait = incapable
			}
		}
		allow = {
			primary_title = { title = e_fulin }
			culture_group = great_qin
			war = no
			prestige = 3000
			completely_controls = d_latium
			completely_controls = d_venice
			completely_controls = d_ferrara
			completely_controls = d_sicily
			completely_controls = d_genoa
			completely_controls = d_capua
			completely_controls = d_apulia
			completely_controls = d_thrace
			completely_controls = d_antioch
			completely_controls = d_jerusalem
			completely_controls = d_alexandria
			completely_controls = d_athens
			completely_controls = d_tunis
			completely_controls = d_croatia
		}
		effect = {
			set_global_flag = rome_restored
			narrative_event = { id = DAQIN.00202 }
		}
		ai_will_do = { factor = 1 }
	}
	
	sinoroman_renaissance = {
		ai_check_interval = 120 #check only once every 120 months.
		only_playable = yes
		is_high_prio = yes
		
		potential = {
			is_playable = yes 
			culture = sinogreek
			has_landed_title = e_daqin
			NOR = { 
				government = chinese_imperial_government
				has_global_flag = flag_started_sinoroman_renaissance
				has_alternate_start_parameter = { key = culture_names value = random }
			}
		}
		allow = {
			show_only_failed_conditions = yes
			OR = { #Remove requirement? Require being either Chinese or Christian or Hellenic as a part of the renaissance?
				religion_group = christian 
				religion_openly_hellenic_or_reformed_trigger = yes
				religion = buddhist
				religion = taoist
			}
			capital_scope = { province = 333 }
			ruled_years = 10
			war = no
		}
		effect = {
			set_global_flag = flag_started_sinoroman_renaissance
			culture = sinoroman
			hidden_tooltip = {
				any_courtier_or_vassal = { 
					limit = { lower_tier_than = COUNT }
					culture = sinoroman
				}
			}
			capital_scope = { culture = sinoroman }
			custom_tooltip = {
				text = sinoroman_renaissance_TT
				hidden_tooltip = {
					any_realm_province = {
						if = {
							limit = { any_neighbor_province = { province = 333 } }
							culture = sinoroman
						}
						if = {
							limit = { 
								culture = italian
								NOT = { distance = { where = 333 distance = 100 } } 
							}
							random = { 
								chance = 40 
								culture = sinoroman 
							}
						}
						if = {
							limit = { 
								culture_group = latin
								NOT = { distance = { where = 333 distance = 200 } } 
							}
							random = { 
								chance = 20 
								culture = sinoroman 
							}
						}
						if = {
							limit = { 
								culture_group = latin
								NOT = { distance = { where = 333 distance = 400 } } 
							}
							random = { 
								chance = 5
								culture = sinoroman 
							}
						}
					}
				}
			}
			hidden_tooltip = {
				if = { #Hellenic Emperor gets chance to spread Hellenism a bit alongside the culture.
					limit = { OR = { religion = hellenic_pagan religion = hellenic_pagan_reformed } }
					any_realm_province = {
						if = {
							limit = { any_neighbor_province = { province = 333 } }
							religion = ROOT
						}
						if = {
							limit = { 
								culture = sinoroman
								NOT = { distance = { where = 333 distance = 100 } } 
							}
							random = { 
								chance = 10 
								religion = ROOT
							}
						}
						if = {
							limit = { 
								culture = sinoroman
								NOT = { distance = { where = 333 distance = 200 } } 
							}
							random = { 
								chance = 5 
								religion = ROOT
							}
						}
					}
				}
			}
			hidden_tooltip = { #Special event if there are still enough christian provinces around (which is very likely)
				if = {
					limit = { 
						any_realm_province = { 
							religion_group = christian
							count = 10
						} 
					}
					character_event = { id = HF.23119 days = 150 random = 50 }
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 3
				religion = hellenic_pagan_reformed
			}
			modifier = {
				factor = 0.01 #Would consider it a step down.
				culture = greek
			}
		}
	}
	
	embrace_sinoroman_culture = {
		ai_check_interval = 120 #check only once every 120 months.
		only_playable = yes
		
		potential = {
			is_playable = yes
			NOT = { culture = sinoroman }
			OR = { 
				culture_group = latin 
				culture_group = byzantine
				culture_group = chinese_group
				culture = sinogreek
			}
			has_dlc = "Holy Fury"
			NOR = {
				government = chinese_imperial_government
				has_global_flag = flag_started_sinoroman_renaissance
				has_alternate_start_parameter = { key = culture_names value = random }
			}
			top_liege = { has_landed_title = e_daqin }
		}
		allow = {
			show_only_failed_conditions = yes
			OR = { 
				culture_group = latin 
				culture_group = byzantine
				culture_group = chinese_group
				culture = sinogreek
			}
		}
		effect = {
			culture = sinoroman
			hidden_tooltip = {
				any_courtier_or_vassal = { 
					limit = { lower_tier_than = COUNT }
					culture = sinoroman
				}
			}
			capital_scope = { culture = sinoroman }
			custom_tooltip = {
				text = sinoroman_renaissance_TT
				hidden_tooltip = {
					any_demesne_province = {
						if = {
							limit = { any_neighbor_province = { province = 333 } }
							culture = sinoroman
						}
						if = {
							limit = { culture = italian }
							random = { 
								chance = 40 
								culture = sinoroman 
							}
						}
						if = {
							limit = { culture_group = latin }
							random = { 
								chance = 12 
								culture = sinoroman 
							}
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 3
				capital_scope = { culture = sinoroman } 
			}
			modifier = {
				factor = 0.01 #Would consider it a step down.
				culture = sinogreek
			}
		}
	}
	
	daqin_classics = { #To ensure maximum compatibility, the decision for delving into classics to rediscover Hellenism is copied here for Great Qin characters. This is no longer the only way.
		only_playable = yes
		ai = no #The ai can do it in the base game. I've literally never seen them organically become Hellenic so why even bother?
		potential = { #Much less stringent than base game - e.g. Hellenism and Classics spread more Eastern, and melting pots ensure they go further still.
			has_game_rule = {
				name = hellenism_rule
				value = on
			}
			has_dlc = "Holy Fury"
			is_adult = yes
			is_incapable = no
			culture_group = great_qin
			OR = { #Must be eccentric or crazy.
				trait = lunatic 
				trait = possessed
				trait = scholar
				trait = mystic
				has_focus = focus_scholarship
			} 
			OR = { #Must control an hellenic Holy Site.
				completely_controls = c_thessalonike
				completely_controls = c_atheniai
				completely_controls = c_siracusa
				completely_controls = c_roma
				completely_controls = c_alexandria
			} 
			NOR = { #Must not have used this decision or be a hellenist already.
				religion_openly_hellenic_or_reformed_trigger = yes
				secret_religion = hellenic_pagan
				secret_religion = hellenic_pagan_reformed
				has_character_modifier = caesars_insight
				has_character_modifier = ciceros_insight
				has_character_modifier = justinians_insight
				has_character_flag = flag_delving_into_classics
				has_global_flag = hellenic_reformation #No point in secrecy, there are other ways to convert.
			}
		}
		allow = { learning = 6 }
		effect = {
			custom_tooltip = {
				text = tooltip_delve_into_classics
			}
			hidden_tooltip = {
				set_character_flag = flag_delving_into_classics
				character_event = { id = HF.23026 }
			}
		}
	}
	
	qin_tomb_decision = {
		only_playable = yes
		ai = no #Shouldn't be accessible by AI but just in case
		
		potential = {
			has_global_flag = qin_tomb_found
			government = western_chinese_government
			NOR = {
				has_global_flag = qin_tomb_complete
				trait = travelling
			}
		}
		allow = {
			NOT = { has_character_flag = do_not_disturb }
			war = no
			is_adult = yes
			is_incapable = no
			government = western_chinese_government
			age < 50
			health = 4
		}
		effect = {
			add_trait = travelling
			character_event = { id = DAQIN.00233 }
		}
	}
	
	qin_tomb_return_home = {
		only_playable = yes
		ai = no
		
		potential = {
			has_global_flag = qin_tomb_found
			NOT = { has_global_flag = qin_tomb_complete } #This is set when the character enters the tomb, not when it's actually complete, to stop them leaving
			trait = travelling
			has_character_modifier = ruler_absent_flat
		}
		allow = { always = yes }
		effect = {
			remove_trait = travelling
			character_event = { id = DAQIN.00266 } #This will stop further events triggering, and will cause the game to run the qin tomb clean-up event
		}
	}
	
	form_tyrian_guard = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 120
		
		potential = {
			has_global_flag = qin_tomb_complete
			government = western_chinese_government
			d_tyrian_guard = { has_holder = no }
			is_adult = yes
		}
		allow = {
			war = no
			has_regent = no
			d_tyrian_guard = { has_holder = no }
			prestige = 500
			wealth = 500
		}
		effect = {
			prestige = -500
			wealth = -500
			activate_title = { title = d_tyrian_guard status = yes }
			narrative_event = { id = DAQIN.00270 }
			create_character = {
				random_traits = yes
				religion = taoist
				culture = han
				dynasty = NONE
				female = no
				age = 34
				trait = skilled_tactician
			}
			new_character = {
				d_tyrian_guard = { grant_title = PREV }
				set_defacto_liege = ROOT
			}
		}
	}
	
	explore_china = { #decision for those with holidays disabled
		only_independent = yes
		ai = no
		
		potential = {
			is_adult = yes
			is_incapable = no
			prisoner = no
			in_command = no
			war = no
			has_game_rule = {
				name = daqin_holiday_rule
				value = off
			}
			government = western_chinese_government
			NOT = { has_global_flag = qin_tomb_found }
		}
		
		allow = {
			NOT = { has_character_flag = do_not_disturb }
			war = no
			is_adult = yes
			is_incapable = no
			government = western_chinese_government
		}
		effect = {
			remove_trait = stressed
			character_event = { id = DAQIN.00231 }
		}
	}
}